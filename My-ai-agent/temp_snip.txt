    # ---------- Post-Tool Reprompt ----------
    def reprompt_after_tools(self) -> str:
        verbose = bool(getattr(self, "verbose_after_tools", False))
        if verbose:
            return (
                "Using the tool results above, produce <|channel|>final with:\n"
                "1) What you checked (1â€“2 sentences)\n"
                "2) Key findings (3â€“7 bullets with brief inline citations)\n"
                "3) Direct answer\n"
                "4) Important caveats\n"
            )
        return (
            "Based on the tool results above, produce <|channel|>final with a clear, synthesized answer. "
            "Summarize; avoid copying raw tool output."
        )

    # ---------- Mem0 Context Block ----------
    @staticmethod
    def mem0_prefix() -> str:
        return "Previous context from user history (use if relevant):"

